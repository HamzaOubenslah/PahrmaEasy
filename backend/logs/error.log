{"level":"error","message":"MongoDB Connection Error ❌ Pharmacy is not defined","stack":"ReferenceError: Pharmacy is not defined\n    at connectDB (file:///C:/Users/PC/Desktop/Pharmacy_pfe/PahrmaEasy/backend/config/database.js:98:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async startServer (file:///C:/Users/PC/Desktop/Pharmacy_pfe/PahrmaEasy/backend/server.js:9:5)","timestamp":"2025-06-27 13:25:05.206"}
{"cause":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"ac-aof489l-shard-00-00.ggxdfit.mongodb.net:27017":{"$clusterTime":null,"address":"ac-aof489l-shard-00-00.ggxdfit.mongodb.net:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":231602710,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"},"ac-aof489l-shard-00-01.ggxdfit.mongodb.net:27017":{"$clusterTime":null,"address":"ac-aof489l-shard-00-01.ggxdfit.mongodb.net:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":231602952,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"},"ac-aof489l-shard-00-02.ggxdfit.mongodb.net:27017":{"$clusterTime":null,"address":"ac-aof489l-shard-00-02.ggxdfit.mongodb.net:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":231602491,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":"atlas-84g224-shard-0","stale":false,"type":"ReplicaSetNoPrimary"},"errorLabelSet":{},"level":"error","message":"Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"ac-aof489l-shard-00-00.ggxdfit.mongodb.net:27017":{"$clusterTime":null,"address":"ac-aof489l-shard-00-00.ggxdfit.mongodb.net:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":231602710,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"},"ac-aof489l-shard-00-01.ggxdfit.mongodb.net:27017":{"$clusterTime":null,"address":"ac-aof489l-shard-00-01.ggxdfit.mongodb.net:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":231602952,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"},"ac-aof489l-shard-00-02.ggxdfit.mongodb.net:27017":{"$clusterTime":null,"address":"ac-aof489l-shard-00-02.ggxdfit.mongodb.net:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":231602491,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":"atlas-84g224-shard-0","stale":false,"type":"ReplicaSetNoPrimary"},"stack":"MongooseServerSelectionError: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/\n    at _handleConnectionErrors (C:\\Users\\Lenovo\\OneDrive\\Bureau\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\connection.js:1165:11)\n    at NativeConnection.openUri (C:\\Users\\Lenovo\\OneDrive\\Bureau\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\connection.js:1096:11)\n    at async connectDB (file:///C:/Users/Lenovo/OneDrive/Bureau/PahrmaEasy/backend/config/database.js:100:5)\n    at async startServer (file:///C:/Users/Lenovo/OneDrive/Bureau/PahrmaEasy/backend/server.js:9:5)","timestamp":"2025-06-28 01:51:52.174"}
{"level":"error","message":"Unhandled Rejection: Cannot populate path `Notification` because it is not in your schema. Set the `strictPopulate` option to false to override.","path":"Notification","stack":"StrictPopulateError: Cannot populate path `Notification` because it is not in your schema. Set the `strictPopulate` option to false to override.\n    at getModelsMapForPopulate (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\helpers\\populate\\getModelsMapForPopulate.js:50:12)\n    at _populatePath (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\model.js:4439:21)\n    at Function.populate (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\model.js:4406:21)\n    at model.populate (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\document.js:4610:24)\n    at Module.loginUser (file:///C:/Users/PC/Desktop/Pharmacy_pfe/PahrmaEasy/backend/service/authService.js:77:15)\n    at async file:///C:/Users/PC/Desktop/Pharmacy_pfe/PahrmaEasy/backend/controller/authController.js:23:34","timestamp":"2025-06-29 14:52:49.568"}
{"level":"error","message":"Unhandled Rejection: Cannot populate path `Notification` because it is not in your schema. Set the `strictPopulate` option to false to override.","path":"Notification","stack":"StrictPopulateError: Cannot populate path `Notification` because it is not in your schema. Set the `strictPopulate` option to false to override.\n    at getModelsMapForPopulate (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\helpers\\populate\\getModelsMapForPopulate.js:50:12)\n    at _populatePath (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\model.js:4439:21)\n    at Function.populate (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\model.js:4406:21)\n    at model.populate (C:\\Users\\PC\\Desktop\\Pharmacy_pfe\\PahrmaEasy\\backend\\node_modules\\mongoose\\lib\\document.js:4610:24)\n    at Module.loginUser (file:///C:/Users/PC/Desktop/Pharmacy_pfe/PahrmaEasy/backend/service/authService.js:76:15)\n    at async file:///C:/Users/PC/Desktop/Pharmacy_pfe/PahrmaEasy/backend/controller/authController.js:23:34","timestamp":"2025-06-29 14:53:37.397"}
{"level":"error","message":"Error: Cart not found","timestamp":"2025-07-01 01:46:36.079"}
{"level":"error","message":"Error: Order validation failed: payment: Path `payment` is required.","timestamp":"2025-07-01 03:46:49.358"}
{"level":"error","message":"Error: Cannot destructure property 'medicineId' of 'req.body' as it is undefined.","timestamp":"2025-07-01 05:04:50.471"}
{"level":"error","message":"Error: Cannot destructure property 'medicineId' of 'req.body' as it is undefined.","timestamp":"2025-07-01 05:04:51.526"}
{"level":"error","message":"Error: Cast to ObjectId failed for value \"all-medicines\" (type string) at path \"_id\" for model \"pharmacy\"","timestamp":"2025-07-01 14:12:18.064"}
{"level":"error","message":"Error: Cast to ObjectId failed for value \"all-medicines\" (type string) at path \"_id\" for model \"pharmacy\"","timestamp":"2025-07-01 14:12:21.247"}
{"level":"error","message":"Error: Cast to ObjectId failed for value \"all-medicines\" (type string) at path \"_id\" for model \"pharmacy\"","timestamp":"2025-07-01 14:16:22.306"}
{"level":"error","message":"Error: Cast to ObjectId failed for value \"all-medicines\" (type string) at path \"_id\" for model \"pharmacy\"","timestamp":"2025-07-01 14:16:32.243"}
{"level":"error","message":"Error: Cast to ObjectId failed for value \"all-medicines\" (type string) at path \"_id\" for model \"pharmacy\"","timestamp":"2025-07-01 14:18:33.675"}
{"level":"error","message":"Error: Medicine not found","timestamp":"2025-07-01 14:54:21.405"}
{"level":"error","message":"Error: Cannot destructure property 'medicineId' of 'req.body' as it is undefined.","timestamp":"2025-07-01 15:33:15.442"}
{"level":"error","message":"Error: Cart is empty","timestamp":"2025-07-01 20:48:42.252"}
{"level":"error","message":"Error: Insufficient stock for Paracetamol","timestamp":"2025-07-01 21:10:48.598"}
{"level":"error","message":"Error: Insufficient stock for Paracetamol","timestamp":"2025-07-01 21:11:22.202"}
{"level":"error","message":"Error: Cart is empty","timestamp":"2025-07-01 21:17:15.689"}
{"level":"error","message":"Error: Cart is empty","timestamp":"2025-07-01 21:17:44.216"}
{"level":"error","message":"Error: Cart is empty","timestamp":"2025-07-01 22:02:14.331"}
{"level":"error","message":"Error: No matching document found for id \"68634c045d9bfcd5031e5657\" version 25 modifiedPaths \"items\"","timestamp":"2025-07-01 22:02:14.914"}
{"level":"error","message":"Error: Cart is empty","timestamp":"2025-07-01 22:21:05.549"}
{"level":"error","message":"Error: Cart is empty","timestamp":"2025-07-01 22:23:04.788"}
{"level":"error","message":"Error: Cannot read properties of undefined (reading 'user')","timestamp":"2025-07-01 22:44:44.876"}
{"level":"error","message":"Error: Cannot read properties of undefined (reading 'user')","timestamp":"2025-07-01 22:44:55.910"}
{"level":"error","message":"Error: Cannot read properties of undefined (reading 'user')","timestamp":"2025-07-01 22:45:12.712"}
{"level":"error","message":"Error: Cannot read properties of undefined (reading 'user')","timestamp":"2025-07-01 22:45:28.005"}
{"level":"error","message":"Error: req is not defined","timestamp":"2025-07-01 22:47:47.489"}
{"level":"error","message":"Error: req is not defined","timestamp":"2025-07-01 22:48:09.977"}
{"level":"error","message":"Error: req is not defined","timestamp":"2025-07-01 22:50:06.896"}
{"level":"error","message":"Error: req is not defined","timestamp":"2025-07-01 22:52:41.961"}
{"level":"error","message":"Error: customerId is not defined","timestamp":"2025-07-01 22:53:18.510"}
{"level":"error","message":"Error: customerId is not defined","timestamp":"2025-07-01 22:53:27.587"}
{"level":"error","message":"Error: Order validation failed: status: `cancelled` is not a valid enum value for path `status`.","timestamp":"2025-07-01 23:05:38.662"}
{"level":"error","message":"Error: Order validation failed: status: `cancelled` is not a valid enum value for path `status`.","timestamp":"2025-07-01 23:07:25.822"}
{"level":"error","message":"Error: Order validation failed: status: `cancelled` is not a valid enum value for path `status`.","timestamp":"2025-07-01 23:08:58.977"}
{"level":"error","message":"Error: Order validation failed: status: `cancelled` is not a valid enum value for path `status`.","timestamp":"2025-07-01 23:10:31.164"}
{"level":"error","message":"Error: Invalid credentials","timestamp":"2025-07-01 23:44:04.489"}
{"level":"error","message":"MongoDB Connection Error ❌: querySrv ECONNREFUSED _mongodb._tcp.cluster0.96t7y.mongodb.net","stack":"Error: querySrv ECONNREFUSED _mongodb._tcp.cluster0.96t7y.mongodb.net\n    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/promises:294:17)","timestamp":"2025-07-02 01:24:33.404"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 01:28:11.576"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 01:28:17.715"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 01:30:29.396"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 01:36:57.893"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:15:47.406"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:00.688"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:04.561"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:15.096"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:17.451"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:18.073"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:22.592"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:23.236"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:41.055"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:46.829"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:47.398"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:16:58.600"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:17:03.754"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:17:04.468"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:18:37.876"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:18:54.627"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:18:56.652"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:02.022"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:18.623"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:22.557"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:24.760"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:24.773"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:27.630"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:27.649"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:36.827"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:19:36.833"}
{"level":"error","message":"Error: Command find requires authentication","timestamp":"2025-07-02 02:20:03.115"}
{"level":"error","message":"Error: getIO is not defined","timestamp":"2025-07-02 14:07:28.510"}
{"level":"error","message":"Error: getIO is not defined","timestamp":"2025-07-02 14:09:45.886"}
{"level":"error","message":"Error: getIO is not defined","timestamp":"2025-07-02 14:09:55.054"}
{"level":"error","message":"Error: getIO is not defined","timestamp":"2025-07-02 14:10:15.808"}
{"level":"error","message":"Error: Invalid credentials","timestamp":"2025-07-02 14:11:03.868"}
{"level":"error","message":"Error: Invalid credentials","timestamp":"2025-07-02 14:21:54.548"}
{"level":"error","message":"Error: No matching document found for id \"68634c045d9bfcd5031e5657\" version 64 modifiedPaths \"items\"","timestamp":"2025-07-02 15:30:14.782"}
{"level":"error","message":"Error: No matching document found for id \"68653d6edf7234676c613790\" version 2 modifiedPaths \"items\"","timestamp":"2025-07-02 15:43:05.384"}
{"level":"error","message":"Error: No matching document found for id \"68653d6edf7234676c613790\" version 4 modifiedPaths \"items\"","timestamp":"2025-07-02 15:44:47.978"}
{"level":"error","message":"Error: No matching document found for id \"68634c045d9bfcd5031e5657\" version 66 modifiedPaths \"items\"","timestamp":"2025-07-02 17:41:57.662"}
{"level":"error","message":"Error: No matching document found for id \"68653d6edf7234676c613790\" version 6 modifiedPaths \"items\"","timestamp":"2025-07-02 17:43:48.453"}
{"level":"error","message":"Error: No matching document found for id \"68653d6edf7234676c613790\" version 8 modifiedPaths \"items\"","timestamp":"2025-07-02 17:44:37.254"}
{"level":"error","message":"Error: Invalid credentials","timestamp":"2025-07-02 23:04:36.418"}
{"level":"error","message":"Error: Cannot destructure property 'medicineId' of 'req.body' as it is undefined.","timestamp":"2025-07-02 23:24:07.062"}
{"level":"error","message":"Error: Cannot destructure property 'medicineId' of 'req.body' as it is undefined.","timestamp":"2025-07-02 23:24:07.712"}
